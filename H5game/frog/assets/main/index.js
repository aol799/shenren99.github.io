window.__require=function t(e,i,o){function n(c,r){if(!i[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(s)return s(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=i[c]={exports:{}};e[c][0].call(p.exports,function(t){return n(e[c][1][t]||t)},p,p.exports,t,e,i,o)}return i[c].exports}for(var s="function"==typeof __require&&__require,c=0;c<o.length;c++)n(o[c]);return n}({apple:[function(t,e){"use strict";cc._RF.push(e,"c70a3thQIFC8psMyjc5Pr9w","apple"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.sprite=this.node.getComponent(cc.Sprite),this.animation=this.node.getComponent(cc.Animation)},start:function(){},onCollisionEnter:function(){var t=this;this.animation.getAnimationState("fade").play(),this.animation.getAnimationState("fade").onStop=function(){t.animation.stop(),t.node.destroy()}}}),cc._RF.pop()},{}],camera:[function(t,e){"use strict";cc._RF.push(e,"54ba4dCj8dD3rx01fXZVsLu","camera"),cc.Class({extends:cc.Component,properties:{Hero:{default:null,type:cc.Node}},onLoad:function(){this.minY=0,this.maxY=520},start:function(){},update:function(){var t=this.Hero.getPosition(),e=this.node.getPosition();e.lerp(t,.1,e),e.y>this.minY&&e.y<this.maxY&&this.node.setPosition(0,e.y)}}),cc._RF.pop()},{}],game:[function(t,e){"use strict";cc._RF.push(e,"79cffwSCSRK5pJ0N7g6kaGf","game");var i=t("globals");cc.Class({extends:cc.Component,properties:{hero:{default:null,type:cc.Node},scoreLabel:{default:null,type:cc.Label}},onLoad:function(){this.initStorage(),this.initDebugSettings(),this.enablePhysics(),this.enableCollisions(),this.setupScoreEvent(),this.updateScoreDisplay(),this.hero.on("collision-enter",this.onHeroCollisionEnter,this)},start:function(){},initStorage:function(){i.storage=cc.sys.localStorage},initDebugSettings:function(){this.debug=!0,cc.debug.setDisplayStats(!1)},enablePhysics:function(){cc.director.getPhysicsManager().enabled=!0},enableCollisions:function(){cc.director.getCollisionManager().enabled=!0},setupScoreEvent:function(){this.hero.on("score",this.handleScoreUpdate,this)},handleScoreUpdate:function(){i.score=Math.min(i.score+1,99),this.updateScoreDisplay()},updateScoreDisplay:function(){this.scoreLabel.string=i.score>9?""+i.score:"0"+i.score},toggleDebug:function(){var t=cc.director.getPhysicsManager(),e=cc.director.getCollisionManager();t.debugDrawFlags=this.debug?cc.PhysicsManager.DrawBits.e_aabbBit:0,e.enabledDebugDraw=this.debug,this.debug=!this.debug},restart:function(){cc.game.restart()},onHeroCollisionEnter:function(t){"fruit"===t.node.group&&this.handleFruitCollision(t.node)},handleFruitCollision:function(t){this.hero.emit("score"),t.destroy()}}),cc._RF.pop()},{globals:"globals"}],globals:[function(t,e){"use strict";cc._RF.push(e,"551513KB7BKzoBXpW9YVs9E","globals"),e.exports={_storage:null,_score:0,set storage(t){this._storage=t;try{var e=JSON.parse(this._storage.getItem("storage"));e&&(this._score=e.score)}catch(i){}},set score(t){this._score=t,this.saveStorage()},get score(){return this._score},saveStorage:function(){this._storage.setItem("storage",JSON.stringify({score:this._score}))}},cc._RF.pop()},{}],herosprite:[function(t,e){"use strict";cc._RF.push(e,"2a104Jjq65PoZkxpU5OmwMX","herosprite"),cc.Class({extends:cc.Component,properties:{spriteJump:{default:null,type:cc.SpriteFrame},spriteFall:{default:null,type:cc.SpriteFrame}},start:function(){}}),cc._RF.pop()},{}],hero:[function(t,e){"use strict";cc._RF.push(e,"e23adC6l31JQq9tCd8oP5aV","hero"),cc.Class({extends:cc.Component,properties:{wallCollider:{default:null,type:cc.Node},platformCollider:{default:null,type:cc.Node},enemyCollision:{default:null,type:cc.Node},trapCollision:{default:null,type:cc.Node},itemCollision:{default:null,type:cc.Node},cameraNode:{default:null,type:cc.Node},walkSpeed:0,jumpForce:0},onLoad:function(){cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.jump,this),this.cameraNode.on(cc.Node.EventType.TOUCH_START,this.jump,this),this.rigidBody=this.node.getComponent(cc.RigidBody),this.spriteNode=this.node.children[0],this.sprite=this.spriteNode.getComponent(cc.Sprite),this.animation=this.spriteNode.getComponent(cc.Animation),this.spriteJump=this.spriteNode.getComponent("herosprite").spriteJump,this.spriteFall=this.spriteNode.getComponent("herosprite").spriteFall,this.direction=1,this.touchingPlatform=!1,this.alive=!0},start:function(){},jump:function(t){t.keyCode===cc.macro.KEY.back&&cc.game.end(),this.touchingPlatform&&this.rigidBody.applyForceToCenter(cc.v2(0,this.jumpForce),!0)},update:function(){this.alive&&(this.rigidBody.applyForceToCenter(cc.v2(this.direction*this.walkSpeed,0),!0),this.rigidBody.linearVelocity.y>0?(this.walkSpeed=50,this.touchingPlatform||(this.animation.stop(),this.sprite.spriteFrame=this.spriteJump)):this.rigidBody.linearVelocity.y<0?(this.walkSpeed=0,this.animation.stop(),this.sprite.spriteFrame=this.spriteFall):(this.walkSpeed=100,this.animation.getAnimationState("running").isPlaying||this.animation.start("running")))},onBeginContact:function(t,e,i){i.node.group===this.wallCollider.group&&(this.direction*=-1,this.spriteNode.scaleX=this.direction,this.walkSpeed=300),i.node.group===this.platformCollider.group&&(this.touchingPlatform=!0)},onEndContact:function(t,e,i){i.node.group===this.platformCollider.group&&(this.touchingPlatform=!1)},onCollisionEnter:function(t){t.node.group!==this.enemyCollision.group&&t.node.group!==this.trapCollision.group||this.death(),t.node.group===this.itemCollision.group&&this.node.emit("score")},death:function(){var t=this;this.rigidBody.type=cc.RigidBodyType.Static,this.alive=!1,this.animation.getAnimationState("hitting").play(),this.animation.getAnimationState("hitting").onStop=function(){t.animation.stop(),cc.game.restart()}}}),cc._RF.pop()},{}],plantbullet:[function(t,e){"use strict";cc._RF.push(e,"f4925+fhN5Ob4skQvCTCK4/","plantbullet"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.sprite=this.node.getComponent(cc.Sprite),this.spriteFrame=this.sprite.spriteFrame,this.bullet=this.node,this.animation=this.node.getComponent(cc.Animation),this.plantAnimation=this.node.parent.getComponent(cc.Animation),this.initX=this.node.x,this.initY=this.node.y,this.flySpeed=3*this.node.scaleX,this.flyStop=!1},start:function(){},update:function(){this.flyStop||(this.node.x+=this.flySpeed),this.node.y=this.initY},onCollisionEnter:function(){this.flyStop=!0,this.attack(),this.bulletHit()},bulletHit:function(){var t=this;this.animation.getAnimationState("bullethit").play(),this.animation.getAnimationState("bullethit").onStop=function(){t.bullet&&(t.bullet.x=t.initX,t.flyStop=!1,t.sprite.spriteFrame=t.spriteFrame)}},attack:function(){this.plantAnimation&&this.plantAnimation.play()}}),cc._RF.pop()},{}],platform:[function(t,e){"use strict";cc._RF.push(e,"bfbd514YLFF8ZrDZyHc9pNv","platform"),cc.Class({extends:cc.Component,properties:{hero:{default:null,type:cc.Node}},onLoad:function(){this.heroDiffY=264,this.physicsBox=this.node.getComponent(cc.PhysicsBoxCollider)},start:function(){},update:function(){var t=this.hero.y+this.heroDiffY;this.node.y<t?this.physicsBox.enabled=!0:this.physicsBox.enabled=!1}}),cc._RF.pop()},{}],rock:[function(t,e){"use strict";cc._RF.push(e,"e7c7cubzbhMY5V1+LgPSV7I","rock"),cc.Class({extends:cc.Component,properties:{wallCollider:{default:null,type:cc.Node}},onLoad:function(){this.direction=1,this.walkSpeed=1.5,this.walkStop=!1,this.sprite=this.node.getComponent(cc.Sprite),this.spriteFrame=this.sprite.spriteFrame,this.animation=this.node.getComponent(cc.Animation)},start:function(){},update:function(){this.walkStop||(this.node.x+=this.direction*this.walkSpeed)},onCollisionEnter:function(t){t.node.group==this.wallCollider.group&&(this.walkStop=!0,this.rockHit())},rockHit:function(){var t=this;this.animation.getAnimationState("rockhit").play(),this.animation.getAnimationState("rockhit").onStop=function(){t.direction*=-1,t.walkStop=!1,t.sprite.spriteFrame=t.spriteFrame}}}),cc._RF.pop()},{}],snail:[function(t,e){"use strict";cc._RF.push(e,"def2cUgW/5NEYnjTEIY8rRr","snail"),cc.Class({extends:cc.Component,properties:{wallCollider:{default:null,type:cc.Node},walkSpeed:{default:-.3,tooltip:"The speed at which the node moves horizontally."}},onLoad:function(){this.direction=1,this.initPlatformCheck()},start:function(){},update:function(t){this.moveNode(t)},onCollisionEnter:function(t){this.handleWallCollision(t)},initPlatformCheck:function(){cc.sys.platform===cc.sys.WECHAT_GAME||this.loadExternalScript()},loadExternalScript:function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?2a304e91d6eab9ab5ea144c17dc786b4";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)},moveNode:function(){this.node.x+=this.direction*this.walkSpeed},handleWallCollision:function(t){t.node.group===this.wallCollider.group&&(this.direction*=-1,this.node.scaleX=this.direction)}}),cc._RF.pop()},{}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"76961/guk5EtK7aCG6tuMGI","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["use_reversed_rotateBy","apple","camera","game","globals","hero","herosprite","plantbullet","platform","rock","snail"]);